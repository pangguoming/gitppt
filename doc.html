<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>NeuroDB说明文档 | NeuroDB</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="高性能内存级图数据库">
    
    <link rel="preload" href="/assets/css/0.styles.576ebed1.css" as="style"><link rel="preload" href="/assets/js/app.cb2501b5.js" as="script"><link rel="preload" href="/assets/js/2.44af4691.js" as="script"><link rel="preload" href="/assets/js/8.29e77ade.js" as="script"><link rel="prefetch" href="/assets/js/10.cea2ffb6.js"><link rel="prefetch" href="/assets/js/11.935d7449.js"><link rel="prefetch" href="/assets/js/12.c0c7bca0.js"><link rel="prefetch" href="/assets/js/13.8ed65b38.js"><link rel="prefetch" href="/assets/js/3.2707812c.js"><link rel="prefetch" href="/assets/js/4.de4bd943.js"><link rel="prefetch" href="/assets/js/5.3bb6a158.js"><link rel="prefetch" href="/assets/js/6.6e9588ad.js"><link rel="prefetch" href="/assets/js/7.a017a0d1.js"><link rel="prefetch" href="/assets/js/9.5febcf3c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.576ebed1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">NeuroDB</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/download.html" class="nav-link">
  下载
</a></div><div class="nav-item"><a href="/usecase.html" class="nav-link">
  应用案例
</a></div><div class="nav-item"><a href="/doc.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  文档
</a></div><div class="nav-item"><a href="/license.html" class="nav-link">
  授权
</a></div><div class="nav-item"><a href="/support.html" class="nav-link">
  技术支持
</a></div><div class="nav-item"><a href="/about.html" class="nav-link">
  关于
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/download.html" class="nav-link">
  下载
</a></div><div class="nav-item"><a href="/usecase.html" class="nav-link">
  应用案例
</a></div><div class="nav-item"><a href="/doc.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  文档
</a></div><div class="nav-item"><a href="/license.html" class="nav-link">
  授权
</a></div><div class="nav-item"><a href="/support.html" class="nav-link">
  技术支持
</a></div><div class="nav-item"><a href="/about.html" class="nav-link">
  关于
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>NeuroDB说明文档</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/doc.html#简介" class="sidebar-link">简介</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/doc.html#安装部署" class="sidebar-link">安装部署</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc.html#windows系统" class="sidebar-link">windows系统</a></li><li class="sidebar-sub-header"><a href="/doc.html#linux系统" class="sidebar-link">linux系统</a></li><li class="sidebar-sub-header"><a href="/doc.html#mac系统" class="sidebar-link">Mac系统</a></li></ul></li><li><a href="/doc.html#快速上手" class="sidebar-link">快速上手</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc.html#创建人脉关系图实例" class="sidebar-link">创建人脉关系图实例</a></li><li class="sidebar-sub-header"><a href="/doc.html#检索" class="sidebar-link">检索</a></li><li class="sidebar-sub-header"><a href="/doc.html#修改" class="sidebar-link">修改</a></li><li class="sidebar-sub-header"><a href="/doc.html#删除" class="sidebar-link">删除</a></li><li class="sidebar-sub-header"><a href="/doc.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/doc.html#neuro-cypher指令" class="sidebar-link">Neuro-cypher指令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc.html#图数据结构" class="sidebar-link">图数据结构</a></li><li class="sidebar-sub-header"><a href="/doc.html#模式-pattern" class="sidebar-link">模式（Pattern）</a></li><li class="sidebar-sub-header"><a href="/doc.html#数据类型" class="sidebar-link">数据类型</a></li><li class="sidebar-sub-header"><a href="/doc.html#match指令" class="sidebar-link">MATCH指令</a></li><li class="sidebar-sub-header"><a href="/doc.html#return指令" class="sidebar-link">RETURN指令</a></li><li class="sidebar-sub-header"><a href="/doc.html#where指令" class="sidebar-link">WHERE指令</a></li><li class="sidebar-sub-header"><a href="/doc.html#order-by指令" class="sidebar-link">ORDER BY指令</a></li><li class="sidebar-sub-header"><a href="/doc.html#skip指令" class="sidebar-link">SKIP指令</a></li><li class="sidebar-sub-header"><a href="/doc.html#limit指令" class="sidebar-link">LIMIT指令</a></li><li class="sidebar-sub-header"><a href="/doc.html#create指令" class="sidebar-link">CREATE指令</a></li><li class="sidebar-sub-header"><a href="/doc.html#merge指令" class="sidebar-link">MERGE指令</a></li><li class="sidebar-sub-header"><a href="/doc.html#delete指令" class="sidebar-link">DELETE指令</a></li><li class="sidebar-sub-header"><a href="/doc.html#detach-delete指令" class="sidebar-link">DETACH DELETE指令</a></li><li class="sidebar-sub-header"><a href="/doc.html#set指令" class="sidebar-link">SET指令</a></li><li class="sidebar-sub-header"><a href="/doc.html#remove指令" class="sidebar-link">REMOVE指令</a></li><li class="sidebar-sub-header"><a href="/doc.html#call指令" class="sidebar-link">CALL指令</a></li><li class="sidebar-sub-header"><a href="/doc.html#load-csv指令" class="sidebar-link">LOAD CSV指令</a></li></ul></li><li><a href="/doc.html#运维管理" class="sidebar-link">运维管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc.html#savedb指令" class="sidebar-link">SAVEDB指令</a></li><li class="sidebar-sub-header"><a href="/doc.html#create-database指令" class="sidebar-link">CREATE DATABASE指令</a></li><li class="sidebar-sub-header"><a href="/doc.html#show-databases指令" class="sidebar-link">SHOW DATABASES指令</a></li><li class="sidebar-sub-header"><a href="/doc.html#use-指令" class="sidebar-link">USE 指令</a></li><li class="sidebar-sub-header"><a href="/doc.html#drop-database指令" class="sidebar-link">DROP DATABASE指令</a></li><li class="sidebar-sub-header"><a href="/doc.html#服务配置文件" class="sidebar-link">服务配置文件</a></li><li class="sidebar-sub-header"><a href="/doc.html#客户端启动参数" class="sidebar-link">客户端启动参数</a></li><li class="sidebar-sub-header"><a href="/doc.html#运行日志" class="sidebar-link">运行日志</a></li></ul></li><li><a href="/doc.html#各开发语言驱动" class="sidebar-link">各开发语言驱动</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc.html#javascript驱动" class="sidebar-link">JavaScript驱动</a></li><li class="sidebar-sub-header"><a href="/doc.html#java驱动" class="sidebar-link">java驱动</a></li><li class="sidebar-sub-header"><a href="/doc.html#python驱动" class="sidebar-link">python驱动</a></li><li class="sidebar-sub-header"><a href="/doc.html#c-驱动" class="sidebar-link">C#驱动</a></li><li class="sidebar-sub-header"><a href="/doc.html#c-c-驱动" class="sidebar-link">c/c++驱动</a></li></ul></li><li><a href="/doc.html#各语言嵌入式开发" class="sidebar-link">各语言嵌入式开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc.html#javascript" class="sidebar-link">JavaScript</a></li><li class="sidebar-sub-header"><a href="/doc.html#java" class="sidebar-link">java</a></li><li class="sidebar-sub-header"><a href="/doc.html#python" class="sidebar-link">python</a></li><li class="sidebar-sub-header"><a href="/doc.html#c" class="sidebar-link">C#</a></li><li class="sidebar-sub-header"><a href="/doc.html#c-c" class="sidebar-link">c/c++</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="neurodb说明文档"><a href="#neurodb说明文档" class="header-anchor">#</a> NeuroDB说明文档</h1> <h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <p>NeuroDB是一个内存级图数据库引擎，能够利用Neuro-cypher指令实现对图数据的创建、编辑、检索 以及建立在复杂图算法上的一些高级图应用。
NeuroDB的主要特性为：</p> <ol><li>轻量级：整个引擎的可执行程序仅有不到400KB</li> <li>内存级：整个图数据被完全载入到内存中进行操作</li> <li>高速：得益于整个数据库都在内存中，无硬盘读写延迟</li> <li>可嵌入式：数据库可以嵌入到您项目里类似sqlite，无需单独部署运维</li> <li>跨平台：各主流操作系统（windows、Linux、Mac）以及主流手机操作系统（Android、IPhone）和任何可运行C语言目标程序的嵌入式系统或单片机（STM32）都可运行NeuroDB</li></ol> <p>本教程将以极简的风格，教会您在1小时内学会NeuroDB的所有技术！Here we go!</p> <h2 id="安装部署"><a href="#安装部署" class="header-anchor">#</a> 安装部署</h2> <p>安装部署前我们需要到“<a href="https://neurodb.org/download" target="_blank" rel="noopener noreferrer">下载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>”页面，下载您系统对应的版本的NeuroDB程序包。安装部署工作非常简单，只需要把下载的NeuroDB程序包解压到您习惯放软件的目录即可。
程序包目录如下：</p> <p><img src="https://gitee.com/pangguoming/pangguoming/raw/master/images/neuro/NeuroDBDirectory.png" alt="image">
其中</p> <ul><li>bin目录下是NeuroDB服务端与客户端可执行程序</li> <li>data目录下是持久化存储的数据文件</li> <li>import目录下是待导入的数据文件（csv文件）</li> <li>logs目录下是运行日志</li></ul> <p>部署完毕后，直接启动bin目录下的NEURO_SERVER即可将NeuroDB服务启动，默认占用8839端口，如果想更换接口可以在后续“运维管理”章节讲如何修改。启动NEURO_CLI可以启动命令行客户端，此客户端默认链接本机8839端口，可通过添加参数host 127.0.0.1  port 8839 修改默认链接ip和端口，我们可以直接在客户端输入命令并查看执行结果。</p> <p>另外，为了更形象、便捷的运行指令和查看结果，推荐安装部署“<a href="https://note.youdao.com/" target="_blank" rel="noopener noreferrer">脑图谱<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>”当做客户端控制台，“脑图谱”提供强大、友好的可视化UI组件提升我们操作图数据展示图数据的体验，本教程中后续的实例将使用脑图谱截图展示结果。</p> <p><img src="https://gitee.com/pangguoming/pangguoming/raw/master/images/neuro/naotupuHomePage.png" alt="image"></p> <h3 id="windows系统"><a href="#windows系统" class="header-anchor">#</a> windows系统</h3> <p>将程序包解压到任意目录，双击并运行bin目录下的NEURO_SERVER.exe。
也可以在命令行下运行。
<img src="https://gitee.com/pangguoming/pangguoming/raw/master/images/neuro/NeuroDBServerInCMD.png" alt="image">
命令行客户端是NEURO_CLI.exe，双击运行即可,如需输入参数连接指定ip和端口的服务，则需在命令行中输入如下命令来启动。NEURO_CLI启动后在命令行中我们可以直接输入Neuro-Cypher命令执行并查看命令行结果。
<img src="https://gitee.com/pangguoming/pangguoming/raw/master/images/neuro/NeuroDBClient.png" alt="image"></p> <h3 id="linux系统"><a href="#linux系统" class="header-anchor">#</a> linux系统</h3> <p>将程序包解压到任意目录
赋予bin目录下的NEURO_SERVER可执行权限</p> <div class="language- extra-class"><pre class="language-text"><code>chmod +x NEURO_SERVER
</code></pre></div><p>运行NEURO_SERVER即可</p> <div class="language- extra-class"><pre class="language-text"><code>./NEURO_SERVER
</code></pre></div><p>或者可以使用nohub命令使之在后台运行</p> <div class="language- extra-class"><pre class="language-text"><code>nohup ./NEURO_SERVER &amp;
</code></pre></div><h3 id="mac系统"><a href="#mac系统" class="header-anchor">#</a> Mac系统</h3> <p>将程序包解压到任意目录，运行bin目录下的NEURO_SERVER即可</p> <div class="language- extra-class"><pre class="language-text"><code>./NEURO_SERVER
</code></pre></div><h2 id="快速上手"><a href="#快速上手" class="header-anchor">#</a> 快速上手</h2> <h3 id="创建人脉关系图实例"><a href="#创建人脉关系图实例" class="header-anchor">#</a> 创建人脉关系图实例</h3> <p>创建公司（Company）、人员（Person）节点，以及公司与人员的工作关系（WORK ），人员之间的朋友关系（FRIEND），从而构建一个简单的人脉关系网络</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span>  
  <span class="token punctuation">(</span>Xiaomi:Company {name:<span class="token string">&quot;小米科技有限责任公司&quot;</span><span class="token punctuation">,</span> create_at:<span class="token number">2010</span><span class="token punctuation">,</span> tagline:<span class="token string">&quot;致力于让全球每个人都能享受科技带来的美好生活&quot;</span>}<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Alibaba:Company {name:<span class="token string">&quot;阿里巴巴集团控股有限公司&quot;</span><span class="token punctuation">,</span> create_at:<span class="token number">1999</span><span class="token punctuation">,</span> tagline:<span class="token string">&quot;旨在构建未来的商业基础设施&quot;</span>}<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Baidu:Company {name:<span class="token string">&quot;百度在线网络技术有限公司&quot;</span><span class="token punctuation">,</span> create_at:<span class="token number">2000</span><span class="token punctuation">,</span> tagline:<span class="token string">&quot;是拥有强大互联网基础的领先AI公司&quot;</span>}<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Leimou:Person {name:<span class="token string">&quot;雷某&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1969</span>}<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Mamou:Person {name:<span class="token string">&quot;马某&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1964</span>}<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Limou:Person {name:<span class="token string">&quot;李某&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1968</span>}<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Chenmou:Person {name:<span class="token string">&quot;陈某&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1960</span>}<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Zhangmou:Person {name:<span class="token string">&quot;张某&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1967</span>}<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Wangmou:Person {name:<span class="token string">&quot;王某&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1965</span>}<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Zhaomou:Person {name:<span class="token string">&quot;赵某&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1952</span>}<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Leimou<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>:<span class="token keyword">WORK</span> {position:<span class="token string">&quot;CEO&quot;</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>Xiaomi<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Chenmou<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>:<span class="token keyword">WORK</span> {position:<span class="token string">&quot;员工&quot;</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>Xiaomi<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Mamou<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>:<span class="token keyword">WORK</span> {position:<span class="token string">&quot;CEO&quot;</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>Alibaba<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Zhaomou<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>:<span class="token keyword">WORK</span> {position:<span class="token string">&quot;员工&quot;</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>Alibaba<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Limou<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>:<span class="token keyword">WORK</span> {position:<span class="token string">&quot;CEO&quot;</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>Baidu<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Wangmou<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>:<span class="token keyword">WORK</span> {position:<span class="token string">&quot;员工&quot;</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>Baidu<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Zhangmou<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>:<span class="token keyword">WORK</span> {position:<span class="token string">&quot;员工&quot;</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>Baidu<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Wangmou<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>:FRIEND{weight:<span class="token number">2</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>Leimou<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Zhaomou<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>:FRIEND{weight:<span class="token number">1</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>Leimou<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Zhangmou<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>:FRIEND{weight:<span class="token number">4</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>Mamou<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Zhangmou<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>:FRIEND{weight:<span class="token number">8</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>Chenmou<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Chenmou<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>:FRIEND{weight:<span class="token number">5</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>Limou<span class="token punctuation">)</span>
<span class="token punctuation">,</span> <span class="token punctuation">(</span>Mamou<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>:FRIEND{weight:<span class="token number">10</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>Limou<span class="token punctuation">)</span>
</code></pre></div><p>创建完毕后，可视化效果如下
<img src="https://gitee.com/pangguoming/pangguoming/raw/master/images/neuro/InterpersonalRelationship.png" alt="image"></p> <h3 id="检索"><a href="#检索" class="header-anchor">#</a> 检索</h3> <ol><li>查询名叫&quot;王某&quot;的人员</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n:Person{name:<span class="token string">&quot;王某&quot;</span>}<span class="token punctuation">)</span> <span class="token keyword">return</span> n
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:40,result:1,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:8 LABELS:Person PROPS:{name:&quot;王某&quot;,born:1965.000000}
</code></pre></div><p>2、查询1965年后出生的人员</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n:Person<span class="token punctuation">)</span> <span class="token keyword">where</span> n<span class="token punctuation">.</span>born <span class="token operator">&gt;</span> <span class="token number">1965</span> <span class="token keyword">return</span> n
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:45,result:3,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:3 LABELS:Person PROPS:{name:&quot;雷某&quot;,born:1969.000000}
(2)-----------------------------------------------------------------------
 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}
(3)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}
</code></pre></div><p>3、查询所有的“朋友”关系</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r:FRIEND<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token keyword">return</span> n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>m
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:38,result:6,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:4 LABELS:Person PROPS:{name:&quot;马某&quot;,born:1964.000000}         ID:12 HEAD:4 TAIL:5 TYPE:FRIEND PROPS:{weight:10}    ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}     

(2)-----------------------------------------------------------------------
 ID:6 LABELS:Person PROPS:{name:&quot;陈某&quot;,born:1960.000000}         ID:11 HEAD:6 TAIL:5 TYPE:FRIEND PROPS:{weight:5}    ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}     

(3)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}         ID:10 HEAD:7 TAIL:6 TYPE:FRIEND PROPS:{weight:8}    ID:6 LABELS:Person PROPS:{name:&quot;陈某&quot;,born:1960.000000}     

(4)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}         ID:9 HEAD:7 TAIL:4 TYPE:FRIEND PROPS:{weight:4}     ID:4 LABELS:Person PROPS:{name:&quot;马某&quot;,born:1964.000000}     

(5)-----------------------------------------------------------------------
 ID:8 LABELS:Person PROPS:{name:&quot;王某&quot;,born:1965.000000}         ID:7 HEAD:8 TAIL:3 TYPE:FRIEND PROPS:{weight:2}     ID:3 LABELS:Person PROPS:{name:&quot;雷某&quot;,born:1969.000000}     

(6)-----------------------------------------------------------------------
 ID:9 LABELS:Person PROPS:{name:&quot;赵某&quot;,born:1952.000000}         ID:8 HEAD:9 TAIL:3 TYPE:FRIEND PROPS:{weight:1}     ID:3 LABELS:Person PROPS:{name:&quot;雷某&quot;,born:1969.000000}     
</code></pre></div><p>可视化：
<img src="https://gitee.com/pangguoming/pangguoming/raw/master/images/neuro/friends.png" alt="image">
4、查询与人员“李某”相关联的所有“一度”关系</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n:Person{name:<span class="token string">&quot;李某&quot;</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token keyword">return</span> n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>m
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:52,result:3,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}	 ID:4 HEAD:5 TAIL:2 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:2 LABELS:Company PROPS:{name:&quot;百度在线网络技术有限公司&quot;,create_at:2000.000000,tagline:&quot;是拥有强大互联网基础的领先AI公司&quot;}	
(2)-----------------------------------------------------------------------
 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}	 ID:12 HEAD:4 TAIL:5 TYPE:FRIEND PROPS:{weight:10}	 ID:4 LABELS:Person PROPS:{name:&quot;马某&quot;,born:1964.000000}	
(3)-----------------------------------------------------------------------
 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}	 ID:11 HEAD:6 TAIL:5 TYPE:FRIEND PROPS:{weight:5}	 ID:6 LABELS:Person PROPS:{name:&quot;陈某&quot;,born:1960.000000}	

</code></pre></div><p>可视化：
<img src="https://gitee.com/pangguoming/pangguoming/raw/master/images/neuro/limou.png" alt="image"></p> <p>5、找到“张某”工作的公司以及他所有同事</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n:Person{name:<span class="token string">&quot;张某&quot;</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>w1:<span class="token keyword">WORK</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>c:Company<span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token operator">-</span><span class="token punctuation">[</span>w2:<span class="token keyword">WORK</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span> <span class="token keyword">RETURN</span> n<span class="token punctuation">,</span>w1<span class="token punctuation">,</span>c<span class="token punctuation">,</span>w2<span class="token punctuation">,</span>n2 
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:93,result:2,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:6 HEAD:7 TAIL:2 TYPE:WORK PROPS:{}	 ID:2 LABELS:Company PROPS:{name:&quot;百度在线网络技术有限公司&quot;,create_at:2000.000000,tagline:&quot;是拥有强大互联网基础的领先AI公司&quot;}	 ID:5 HEAD:8 TAIL:2 TYPE:WORK PROPS:{position:&quot;员工&quot;}	 ID:8 LABELS:Person PROPS:{name:&quot;王某&quot;,born:1965.000000}	
(2)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:6 HEAD:7 TAIL:2 TYPE:WORK PROPS:{}	 ID:2 LABELS:Company PROPS:{name:&quot;百度在线网络技术有限公司&quot;,create_at:2000.000000,tagline:&quot;是拥有强大互联网基础的领先AI公司&quot;}	 ID:4 HEAD:5 TAIL:2 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}	

</code></pre></div><p>可视化：
<img src="https://gitee.com/pangguoming/pangguoming/raw/master/images/neuro/zhangcompany.png" alt="image"></p> <p>6、查询“张某”与“赵某”的最短人脉路径，通过下面结果可知张某与马某是朋友，而马某与赵某是同一个公司的同事。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> path<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">start</span> :Person{name:<span class="token string">&quot;张某&quot;</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>rels <span class="token operator">*</span><span class="token operator">&lt;</span><span class="token punctuation">]</span><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">end</span>  :Person{name:<span class="token string">&quot;赵某&quot;</span>}<span class="token punctuation">)</span> <span class="token keyword">RETURN</span> path 
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:95,result:1,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:9 HEAD:7 TAIL:4 TYPE:FRIEND PROPS:{weight:4} ID:4 LABELS:Person PROPS:{name:&quot;马某&quot;,born:1964.000000} ID:2 HEAD:4 TAIL:1 TYPE:WORK PROPS:{position:&quot;CEO&quot;} ID:1 LABELS:Company PROPS:{name:&quot;阿里巴巴集团控股有限公司&quot;,create_at:1999.000000,tagline:&quot;旨在构建未来的商业基础设施&quot;} ID:3 HEAD:9 TAIL:1 TYPE:WORK PROPS:{position:&quot;员工&quot;}	 ID:9 LABELS:Person PROPS:{name:&quot;赵某&quot;,born:1952.000000}	

</code></pre></div><p>可视化：
<img src="https://gitee.com/pangguoming/pangguoming/raw/master/images/neuro/zhangzhaolujing.png" alt="image"></p> <h3 id="修改"><a href="#修改" class="header-anchor">#</a> 修改</h3> <p>1、为人员“张某”添加性别属性</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n :Person{name:<span class="token string">&quot;张某&quot;</span>}<span class="token punctuation">)</span> <span class="token keyword">set</span> n<span class="token punctuation">.</span>sex<span class="token operator">=</span><span class="token string">&quot;男&quot;</span> <span class="token keyword">return</span> n
</code></pre></div><p>2、为人员“张某”修改性别属性为女</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n :Person{name:<span class="token string">&quot;张某&quot;</span>}<span class="token punctuation">)</span> <span class="token keyword">set</span> n<span class="token punctuation">.</span>sex<span class="token operator">=</span><span class="token string">&quot;女&quot;</span> <span class="token keyword">return</span> n
</code></pre></div><h3 id="删除"><a href="#删除" class="header-anchor">#</a> 删除</h3> <p>删除操作要注意，如果某个节点带有任何关系边，则无法直接删除，需要先删除其所有关系边后才可以删除此节点，或者我们可以用“detach delete”指令一步到位一条指令同时删除其关联的所有关系边和此节点。</p> <p>1、删除张某与马某的朋友关系</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n :Person{name:<span class="token string">&quot;张某&quot;</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r:FRIEND<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>m :Person{name:<span class="token string">&quot;马某&quot;</span>}<span class="token punctuation">)</span> <span class="token keyword">DELETE</span> r
</code></pre></div><p>2、删除人员张某节点，此命令会提示无法删除，因为张某还有两条关联的关系没删除</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n :Person{name:<span class="token string">&quot;张某&quot;</span>}<span class="token punctuation">)</span> <span class="token keyword">DELETE</span> n
</code></pre></div><p>3、删除人员张某节点及其关联的所有关系</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n :Person{name:<span class="token string">&quot;张某&quot;</span>}<span class="token punctuation">)</span> DETACH <span class="token keyword">DELETE</span> n
</code></pre></div><h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <p>至此，我们就快速的上手体验了NeuroDB的一个人脉关系实例，实例的数据量非常小，但这便于我们运行，实际应用中，NeuroDB支持海量数据的构成的图。</p> <h2 id="neuro-cypher指令"><a href="#neuro-cypher指令" class="header-anchor">#</a> Neuro-cypher指令</h2> <p>Neuro-cypher是一种声明式图数据库查询语言，它具有丰富的表现力，能高效地查询和更新图数据。</p> <h3 id="图数据结构"><a href="#图数据结构" class="header-anchor">#</a> 图数据结构</h3> <p>图由节点和关系构成。节点可能还带有标签和属性，关系带有类型和属性。节点表达的是实体，关系连接一对节点。节点可以看作类似关系数据库中的表，但又不完全一样。节点的标签可以理解为不同的表名，属性类似关系数据库中表的列。一个节点的数据类似关系数据库中表的一行数据。拥有相同标签的节点通常具有类似的属性。</p> <h3 id="模式-pattern"><a href="#模式-pattern" class="header-anchor">#</a> 模式（Pattern）</h3> <p>我们可以通过模式将复杂的想法编码为众多节点和关系Neuro-cypher查询语言很依赖于描述模式。模式可以简单到只有一对节点以及连接这对节点的关系。例如，一个人住（LIVES_IN）在某个城市或者某个城市属于（PART_OF）某个国家。模式也可以复杂到使用多个关系来表达复杂的概念，从而可以支持各种有趣的使用场景。例如，下面的Cypher代码将两个简单的模式连接在一起：</p> <div class="language- extra-class"><pre class="language-text"><code>(:Person) -[:WORK]-&gt; (:Company)
</code></pre></div><h4 id="描述节点"><a href="#描述节点" class="header-anchor">#</a> 描述节点</h4> <p>Cypher采用一对圆括号来表示节点，如：()、(foo)。下面是一些常见的节点表示法：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">--空节点</span>
<span class="token punctuation">(</span>xiaomi<span class="token punctuation">)</span> <span class="token comment">--只有节点变量名的空节点</span>
<span class="token punctuation">(</span>:Company<span class="token punctuation">)</span> <span class="token comment">--有节点标签定义的节点</span>
<span class="token punctuation">(</span>xiaomi:Company<span class="token punctuation">)</span> <span class="token comment">--有变量名和标签定义的节点</span>
<span class="token punctuation">(</span>xiaomi:Company {name: <span class="token string">&quot;xiaomi&quot;</span>}<span class="token punctuation">)</span> <span class="token comment">--有变量名、标签 和一个title属性的节点</span>
<span class="token punctuation">(</span>xiaomi:Company {name: <span class="token string">&quot;xiaomi&quot;</span><span class="token punctuation">,</span> create_at: <span class="token number">1997</span>}<span class="token punctuation">)</span> <span class="token comment">--有变量名、标签 和两个属性的节点</span>
</code></pre></div><h4 id="描述关系"><a href="#描述关系" class="header-anchor">#</a> 描述关系</h4> <p>Cypher使用一对短横线（即--）表示一个无方向关系。有方向的关系则在其中一端加上一个箭头（即&lt;--或--&gt;）。方括号表达式[…]可用于添加详情。里面可以包含变量、属性和（或者）类型信息。关系的常见表达方式如下：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">--&gt;  --空关系</span>
<span class="token operator">-</span><span class="token punctuation">[</span>role<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token comment">--只有一个变量名的空关系</span>
<span class="token operator">-</span><span class="token punctuation">[</span>:<span class="token keyword">WORK</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span>   <span class="token comment">--带有关系类型的关系</span>
<span class="token operator">-</span><span class="token punctuation">[</span>role:<span class="token keyword">WORK</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token comment">--带有变量名和关系类型的关系</span>
<span class="token operator">-</span><span class="token punctuation">[</span>role:<span class="token keyword">WORK</span> {position: <span class="token string">&quot;CEO&quot;</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token comment">--带有变量名、类型、一个属性的关系</span>
</code></pre></div><h4 id="模式语法"><a href="#模式语法" class="header-anchor">#</a> 模式语法</h4> <p>可以将以上节点和关系的语法组合在一起来表达模式。下面是一个简单的模式：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token punctuation">(</span>leimou:Person {name:<span class="token string">&quot;雷某&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1969</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>:<span class="token keyword">WORK</span> {position:<span class="token string">&quot;CEO&quot;</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span>
 <span class="token punctuation">(</span>Xiaomi:Company {name:<span class="token string">&quot;小米科技有限责任公司&quot;</span><span class="token punctuation">,</span> create_at:<span class="token number">2010</span><span class="token punctuation">,</span> tagline:<span class="token string">&quot;致力于让全球每个人都能享受科技带来的美好生活&quot;</span>}<span class="token punctuation">)</span>
</code></pre></div><h3 id="数据类型"><a href="#数据类型" class="header-anchor">#</a> 数据类型</h3> <p>Cypher支持以下数据类型：
属性类型：</p> <ul><li>数字（Integer）</li> <li>字符串（String）</li> <li>数字数组（Integer Array）</li> <li>字符串数组（String Array）</li></ul> <p>结构类型：</p> <ul><li>节点（Node）</li> <li>关系（Relationship）</li> <li>路径（Path）</li></ul> <h3 id="match指令"><a href="#match指令" class="header-anchor">#</a> MATCH指令</h3> <p>MATCH语句用指定的模式（Pattern）来检索数据库。它常与带有约束或者断言的WHERE语句一起使用</p> <h4 id="查找节点"><a href="#查找节点" class="header-anchor">#</a> 查找节点</h4> <p>1、查询所有节点，模式中只有一个变量其他无任何限定条件，则返回全部节点</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token keyword">RETURN</span> n
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:18,result:10,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:0 LABELS:Company PROPS:{name:&quot;小米科技有限责任公司&quot;,create_at:2010.000000,tagline:&quot;致力于让全球每个人都能享受科技带来的美好生活&quot;}
(2)-----------------------------------------------------------------------
 ID:1 LABELS:Company PROPS:{name:&quot;阿里巴巴集团控股有限公司&quot;,create_at:1999.000000,tagline:&quot;旨在构建未来的商业基础设施&quot;}
(3)-----------------------------------------------------------------------
 ID:2 LABELS:Company PROPS:{name:&quot;百度在线网络技术有限公司&quot;,create_at:2000.000000,tagline:&quot;是拥有强大互联网基础的领先AI公司&quot;}
(4)-----------------------------------------------------------------------
 ID:3 LABELS:Person PROPS:{name:&quot;雷某&quot;,born:1969.000000}
(5)-----------------------------------------------------------------------
 ID:4 LABELS:Person PROPS:{name:&quot;马某&quot;,born:1964.000000}
(6)-----------------------------------------------------------------------
 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}
(7)-----------------------------------------------------------------------
 ID:6 LABELS:Person PROPS:{name:&quot;陈某&quot;,born:1960.000000}
(8)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}
(9)-----------------------------------------------------------------------
 ID:8 LABELS:Person PROPS:{name:&quot;王某&quot;,born:1965.000000}
(10)-----------------------------------------------------------------------
 ID:9 LABELS:Person PROPS:{name:&quot;赵某&quot;,born:1952.000000}
</code></pre></div><p>2、查询带有某个标签的所有节点，在模式中节点上添加:Company 标签</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n:Company<span class="token punctuation">)</span> <span class="token keyword">RETURN</span> n
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:26,result:3,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:0 LABELS:Company PROPS:{name:&quot;小米科技有限责任公司&quot;,create_at:2010.000000,tagline:&quot;致力于让全球每个人都能享受科技带来的美好生活&quot;}
(2)-----------------------------------------------------------------------
 ID:1 LABELS:Company PROPS:{name:&quot;阿里巴巴集团控股有限公司&quot;,create_at:1999.000000,tagline:&quot;旨在构建未来的商业基础设施&quot;}
(3)-----------------------------------------------------------------------
 ID:2 LABELS:Company PROPS:{name:&quot;百度在线网络技术有限公司&quot;,create_at:2000.000000,tagline:&quot;是拥有强大互联网基础的领先AI公司&quot;}
</code></pre></div><p>3、查询id为0的节点</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n <span class="token comment">#0) RETURN n</span>
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:21,result:1,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:0 LABELS:Company PROPS:{name:&quot;小米科技有限责任公司&quot;,create_at:2010.000000,tagline:&quot;致力于让全球每个人都能享受科技带来的美好生活&quot;}
</code></pre></div><h4 id="查找关系"><a href="#查找关系" class="header-anchor">#</a> 查找关系</h4> <p>1、按方向查找关系，关系的方向可以通过--&gt;或者&lt;--来表示，如向在模式中匹配人员节点“王某”向外指出的所有关系，则如下</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>:Person { name:<span class="token string">&quot;王某&quot;</span> }<span class="token punctuation">)</span><span class="token comment">--&gt;(m) return m</span>
</code></pre></div><p>反之，想要匹配指向王某的所有关系，则如下</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>:Person { name:<span class="token string">&quot;王某&quot;</span> }<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token comment">--(m) return m</span>
</code></pre></div><p>因为以上两条指令关系上无任何限定条件，所以会查出指出和指向王某的所有关系。
2、为关系添加变量，并返回关系</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>:Person { name:<span class="token string">&quot;王某&quot;</span> }<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">return</span> r
</code></pre></div><p>结果:</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:48,result:3,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:10 HEAD:7 TAIL:6 TYPE:FRIEND PROPS:{weight:8}
(2)-----------------------------------------------------------------------
 ID:9 HEAD:7 TAIL:4 TYPE:FRIEND PROPS:{weight:4}
(3)-----------------------------------------------------------------------
 ID:6 HEAD:7 TAIL:2 TYPE:WORK PROPS:{}	
</code></pre></div><p>3、查找id为0的关系</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">match</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r <span class="token comment">#0]-&gt;() return r</span>
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:28,result:1,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:0 HEAD:3 TAIL:0 TYPE:WORK PROPS:{position:&quot;CEO&quot;}
</code></pre></div><p>4、匹配关系类型,查询所有的“朋友”关系</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r:FRIEND<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token keyword">return</span> n<span class="token punctuation">,</span>r<span class="token punctuation">,</span>m
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:38,result:6,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:4 LABELS:Person PROPS:{name:&quot;马某&quot;,born:1964.000000}         ID:12 HEAD:4 TAIL:5 TYPE:FRIEND PROPS:{weight:10}    ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}     

(2)-----------------------------------------------------------------------
 ID:6 LABELS:Person PROPS:{name:&quot;陈某&quot;,born:1960.000000}         ID:11 HEAD:6 TAIL:5 TYPE:FRIEND PROPS:{weight:5}    ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}     

(3)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}         ID:10 HEAD:7 TAIL:6 TYPE:FRIEND PROPS:{weight:8}    ID:6 LABELS:Person PROPS:{name:&quot;陈某&quot;,born:1960.000000}     

(4)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}         ID:9 HEAD:7 TAIL:4 TYPE:FRIEND PROPS:{weight:4}     ID:4 LABELS:Person PROPS:{name:&quot;马某&quot;,born:1964.000000}     

(5)-----------------------------------------------------------------------
 ID:8 LABELS:Person PROPS:{name:&quot;王某&quot;,born:1965.000000}         ID:7 HEAD:8 TAIL:3 TYPE:FRIEND PROPS:{weight:2}     ID:3 LABELS:Person PROPS:{name:&quot;雷某&quot;,born:1969.000000}     

(6)-----------------------------------------------------------------------
 ID:9 LABELS:Person PROPS:{name:&quot;赵某&quot;,born:1952.000000}         ID:8 HEAD:9 TAIL:3 TYPE:FRIEND PROPS:{weight:1}     ID:3 LABELS:Person PROPS:{name:&quot;雷某&quot;,born:1969.000000}     
</code></pre></div><p>5、匹配多种关系类型，查找FRIEND或WORK类型的关系</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">match</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r:FRIEND<span class="token operator">|</span><span class="token keyword">WORK</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">return</span> r

</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:37,result:13,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:0 HEAD:3 TAIL:0 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	
(2)-----------------------------------------------------------------------
 ID:12 HEAD:4 TAIL:5 TYPE:FRIEND PROPS:{weight:10}	
(3)-----------------------------------------------------------------------
 ID:2 HEAD:4 TAIL:1 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	
(4)-----------------------------------------------------------------------
 ID:4 HEAD:5 TAIL:2 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	
(5)-----------------------------------------------------------------------
 ID:11 HEAD:6 TAIL:5 TYPE:FRIEND PROPS:{weight:5}	
(6)-----------------------------------------------------------------------
 ID:1 HEAD:6 TAIL:0 TYPE:WORK PROPS:{position:&quot;员工&quot;}	
(7)-----------------------------------------------------------------------
 ID:10 HEAD:7 TAIL:6 TYPE:FRIEND PROPS:{weight:8}	
(8)-----------------------------------------------------------------------
 ID:9 HEAD:7 TAIL:4 TYPE:FRIEND PROPS:{weight:4}	
(9)-----------------------------------------------------------------------
 ID:6 HEAD:7 TAIL:2 TYPE:WORK PROPS:{}	
(10)-----------------------------------------------------------------------
 ID:7 HEAD:8 TAIL:3 TYPE:FRIEND PROPS:{weight:2}	
(11)-----------------------------------------------------------------------
 ID:5 HEAD:8 TAIL:2 TYPE:WORK PROPS:{position:&quot;员工&quot;}	
(12)-----------------------------------------------------------------------
 ID:8 HEAD:9 TAIL:3 TYPE:FRIEND PROPS:{}	
(13)-----------------------------------------------------------------------
 ID:3 HEAD:9 TAIL:1 TYPE:WORK PROPS:{position:&quot;员工&quot;}	
</code></pre></div><p>6、查找关系上带有属性 “position”为“CEO”的关系</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">match</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r {position:<span class="token string">&quot;CEO&quot;</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">return</span> r
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:42,result:3,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:0 HEAD:3 TAIL:0 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	
(2)-----------------------------------------------------------------------
 ID:2 HEAD:4 TAIL:1 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	
(3)-----------------------------------------------------------------------
 ID:4 HEAD:5 TAIL:2 TYPE:WORK PROPS:{position:&quot;CEO&quot;}
</code></pre></div><p>7、查找多条关系组合的模式，也就是指定关系的长度，如查找两条关系与三个节点组合的模式，我们称之为长度为2的模式</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">match</span> <span class="token punctuation">(</span>n1<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r1<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r2<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>n3<span class="token punctuation">)</span> <span class="token keyword">return</span> n1<span class="token punctuation">,</span>r1<span class="token punctuation">,</span>n2<span class="token punctuation">,</span>r2<span class="token punctuation">,</span>n3
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:54,result:8,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:4 LABELS:Person PROPS:{name:&quot;马某&quot;,born:1964.000000}	 ID:12 HEAD:4 TAIL:5 TYPE:FRIEND PROPS:{weight:10}	 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}	 ID:4 HEAD:5 TAIL:2 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:2 LABELS:Company PROPS:{name:&quot;百度在线网络技术有限公司&quot;,create_at:2000.000000,tagline:&quot;是拥有强大互联网基础的领先AI公司&quot;}
(2)-----------------------------------------------------------------------
 ID:6 LABELS:Person PROPS:{name:&quot;陈某&quot;,born:1960.000000}	 ID:11 HEAD:6 TAIL:5 TYPE:FRIEND PROPS:{weight:5}	 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}	 ID:4 HEAD:5 TAIL:2 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:2 LABELS:Company PROPS:{name:&quot;百度在线网络技术有限公司&quot;,create_at:2000.000000,tagline:&quot;是拥有强大互联网基础的领先AI公司&quot;}
(3)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:10 HEAD:7 TAIL:6 TYPE:FRIEND PROPS:{weight:8}	 ID:6 LABELS:Person PROPS:{name:&quot;陈某&quot;,born:1960.000000}	 ID:11 HEAD:6 TAIL:5 TYPE:FRIEND PROPS:{weight:5}	 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}
(4)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:10 HEAD:7 TAIL:6 TYPE:FRIEND PROPS:{weight:8}	 ID:6 LABELS:Person PROPS:{name:&quot;陈某&quot;,born:1960.000000}	 ID:1 HEAD:6 TAIL:0 TYPE:WORK PROPS:{position:&quot;员工&quot;}	 ID:0 LABELS:Company PROPS:{name:&quot;小米科技有限责任公司&quot;,create_at:2010.000000,tagline:&quot;致力于让全球每个人都能享受科技带来的美好生活&quot;}
(5)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:9 HEAD:7 TAIL:4 TYPE:FRIEND PROPS:{weight:4}	 ID:4 LABELS:Person PROPS:{name:&quot;马某&quot;,born:1964.000000}	 ID:12 HEAD:4 TAIL:5 TYPE:FRIEND PROPS:{weight:10}	 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}
(6)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:9 HEAD:7 TAIL:4 TYPE:FRIEND PROPS:{weight:4}	 ID:4 LABELS:Person PROPS:{name:&quot;马某&quot;,born:1964.000000}	 ID:2 HEAD:4 TAIL:1 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:1 LABELS:Company PROPS:{name:&quot;阿里巴巴集团控股有限公司&quot;,create_at:1999.000000,tagline:&quot;旨在构建未来的商业基础设施&quot;}
(7)-----------------------------------------------------------------------
 ID:8 LABELS:Person PROPS:{name:&quot;王某&quot;,born:1965.000000}	 ID:7 HEAD:8 TAIL:3 TYPE:FRIEND PROPS:{weight:2}	 ID:3 LABELS:Person PROPS:{name:&quot;雷某&quot;,born:1969.000000}	 ID:0 HEAD:3 TAIL:0 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:0 LABELS:Company PROPS:{name:&quot;小米科技有限责任公司&quot;,create_at:2010.000000,tagline:&quot;致力于让全球每个人都能享受科技带来的美好生活&quot;}
(8)-----------------------------------------------------------------------
 ID:9 LABELS:Person PROPS:{name:&quot;赵某&quot;,born:1952.000000}	 ID:8 HEAD:9 TAIL:3 TYPE:FRIEND PROPS:{}	 ID:3 LABELS:Person PROPS:{name:&quot;雷某&quot;,born:1969.000000}	 ID:0 HEAD:3 TAIL:0 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:0 LABELS:Company PROPS:{name:&quot;小米科技有限责任公司&quot;,create_at:2010.000000,tagline:&quot;致力于让全球每个人都能享受科技带来的美好生活&quot;}
</code></pre></div><h4 id="查找路径"><a href="#查找路径" class="header-anchor">#</a> 查找路径</h4> <p>1、查找可变长度的路径
查找关系长度最小为2的模式，即长度大于等于2的所有关系及其首尾节点</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">match</span> <span class="token punctuation">(</span>n1:Person{name:<span class="token string">&quot;王某&quot;</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r<span class="token operator">*</span><span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span> <span class="token keyword">return</span> n1<span class="token punctuation">,</span>r<span class="token punctuation">,</span>n2
</code></pre></div><p>结果</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:61,result:1,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:8 LABELS:Person PROPS:{name:&quot;王某&quot;,born:1965.000000}	 ID:7 HEAD:8 TAIL:3 TYPE:FRIEND PROPS:{weight:2}	 ID:0 HEAD:3 TAIL:0 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:0 LABELS:Company PROPS:{name:&quot;小米科技有限责任公司&quot;,create_at:2010.000000,tagline:&quot;致力于让全球每个人都能享受科技带来的美好生活&quot;}

</code></pre></div><p>2、查找关系长度最大为2的模式，即长度为1和长度为2的关系及其首尾节点</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">match</span> <span class="token punctuation">(</span>n1:Person{name:<span class="token string">&quot;王某&quot;</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r<span class="token operator">*</span><span class="token punctuation">.</span><span class="token number">.2</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span> <span class="token keyword">return</span> n1<span class="token punctuation">,</span>r<span class="token punctuation">,</span>n2
</code></pre></div><p>结果</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:61,result:3,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:8 LABELS:Person PROPS:{name:&quot;王某&quot;,born:1965.000000}	 ID:7 HEAD:8 TAIL:3 TYPE:FRIEND PROPS:{weight:2}	 ID:0 HEAD:3 TAIL:0 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:0 LABELS:Company PROPS:{name:&quot;小米科技有限责任公司&quot;,create_at:2010.000000,tagline:&quot;致力于让全球每个人都能享受科技带来的美好生活&quot;}
(2)-----------------------------------------------------------------------
 ID:8 LABELS:Person PROPS:{name:&quot;王某&quot;,born:1965.000000}	 ID:5 HEAD:8 TAIL:2 TYPE:WORK PROPS:{position:&quot;员工&quot;}	 ID:2 LABELS:Company PROPS:{name:&quot;百度在线网络技术有限公司&quot;,create_at:2000.000000,tagline:&quot;是拥有强大互联网基础的领先AI公司&quot;}
(3)-----------------------------------------------------------------------
 ID:8 LABELS:Person PROPS:{name:&quot;王某&quot;,born:1965.000000}	 ID:7 HEAD:8 TAIL:3 TYPE:FRIEND PROPS:{weight:2}	 ID:3 LABELS:Person PROPS:{name:&quot;雷某&quot;,born:1969.000000}

&gt;
</code></pre></div><p>3、查找指定长度指定为3的所有关系及其首尾节点</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">match</span> <span class="token punctuation">(</span>n1<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r<span class="token operator">*</span><span class="token number">3.</span><span class="token number">.3</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span> <span class="token keyword">return</span> n1<span class="token punctuation">,</span>r<span class="token punctuation">,</span>n2
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:40,result:2,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:10 HEAD:7 TAIL:6 TYPE:FRIEND PROPS:{weight:8}	 ID:11 HEAD:6 TAIL:5 TYPE:FRIEND PROPS:{weight:5}	 ID:4 HEAD:5 TAIL:2 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:2 LABELS:Company PROPS:{name:&quot;百度在线网络技术有限公司&quot;,create_at:2000.000000,tagline:&quot;是拥有强大互联网基础的领先AI公司&quot;}
(2)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:9 HEAD:7 TAIL:4 TYPE:FRIEND PROPS:{weight:4}	 ID:12 HEAD:4 TAIL:5 TYPE:FRIEND PROPS:{weight:10}	 ID:4 HEAD:5 TAIL:2 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:2 LABELS:Company PROPS:{name:&quot;百度在线网络技术有限公司&quot;,create_at:2000.000000,tagline:&quot;是拥有强大互联网基础的领先AI公司&quot;}

</code></pre></div><p>4、查找关系长度在2到3，并且起始节点是人员“张某”的模式</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">match</span> <span class="token punctuation">(</span>n1:Person{name:<span class="token string">&quot;张某&quot;</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r<span class="token operator">*</span><span class="token number">2.</span><span class="token number">.3</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span> <span class="token keyword">return</span> n1<span class="token punctuation">,</span>r<span class="token punctuation">,</span>n2
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:62,result:6,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:10 HEAD:7 TAIL:6 TYPE:FRIEND PROPS:{weight:8}	 ID:1 HEAD:6 TAIL:0 TYPE:WORK PROPS:{position:&quot;员工&quot;}	 ID:0 LABELS:Company PROPS:{name:&quot;小米科技有限责任公司&quot;,create_at:2010.000000,tagline:&quot;致力于让全球每个人都能享受科技带来的美好生活&quot;}
(2)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:9 HEAD:7 TAIL:4 TYPE:FRIEND PROPS:{weight:4}	 ID:2 HEAD:4 TAIL:1 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:1 LABELS:Company PROPS:{name:&quot;阿里巴巴集团控股有限公司&quot;,create_at:1999.000000,tagline:&quot;旨在构建未来的商业基础设施&quot;}
(3)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:10 HEAD:7 TAIL:6 TYPE:FRIEND PROPS:{weight:8}	 ID:11 HEAD:6 TAIL:5 TYPE:FRIEND PROPS:{weight:5}	 ID:4 HEAD:5 TAIL:2 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:2 LABELS:Company PROPS:{name:&quot;百度在线网络技术有限公司&quot;,create_at:2000.000000,tagline:&quot;是拥有强大互联网基础的领先AI公司&quot;}
(4)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:9 HEAD:7 TAIL:4 TYPE:FRIEND PROPS:{weight:4}	 ID:12 HEAD:4 TAIL:5 TYPE:FRIEND PROPS:{weight:10}	 ID:4 HEAD:5 TAIL:2 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:2 LABELS:Company PROPS:{name:&quot;百度在线网络技术有限公司&quot;,create_at:2000.000000,tagline:&quot;是拥有强大互联网基础的领先AI公司&quot;}
(5)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:10 HEAD:7 TAIL:6 TYPE:FRIEND PROPS:{weight:8}	 ID:11 HEAD:6 TAIL:5 TYPE:FRIEND PROPS:{weight:5}	 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}
(6)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:9 HEAD:7 TAIL:4 TYPE:FRIEND PROPS:{weight:4}	 ID:12 HEAD:4 TAIL:5 TYPE:FRIEND PROPS:{weight:10}	 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}

</code></pre></div><p>5、全部路径查询，查询两个节点间的所有路径，此操作往往返回的是数据库中所有节点关系的笛卡尔乘积基本的数据量，所以很容易因数据量过大而无法返回，请读者谨慎使用。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">match</span> <span class="token punctuation">(</span>n1:Person{name:<span class="token string">&quot;张某&quot;</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>n2:Person{name:<span class="token string">&quot;王某&quot;</span>}<span class="token punctuation">)</span> <span class="token keyword">return</span> n1<span class="token punctuation">,</span>r<span class="token punctuation">,</span>n2
</code></pre></div><p>结果集过大这里不展示</p> <h4 id="最优路径查询"><a href="#最优路径查询" class="header-anchor">#</a> 最优路径查询</h4> <p>最优路径可以查最短路径也可以查最长路径，可以是按权值查找也可以按路径长度查找，我们只需在模式中关系描述的*后面加上小于号或大于号来代表是最短路径查找还是最长路径查找。
1、查询“张某”与“赵某”的最短人脉路径，通过下面结果可知张某与马某是朋友，而马某与赵某是同一个公司的同事，注意我们没有加箭头指向限定</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> path<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">start</span> :Person{name:<span class="token string">&quot;张某&quot;</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>rels <span class="token operator">*</span><span class="token operator">&lt;</span><span class="token punctuation">]</span><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">end</span>  :Person{name:<span class="token string">&quot;赵某&quot;</span>}<span class="token punctuation">)</span> <span class="token keyword">RETURN</span> path 
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:95,result:1,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:9 HEAD:7 TAIL:4 TYPE:FRIEND PROPS:{weight:4} ID:4 LABELS:Person PROPS:{name:&quot;马某&quot;,born:1964.000000} ID:2 HEAD:4 TAIL:1 TYPE:WORK PROPS:{position:&quot;CEO&quot;} ID:1 LABELS:Company PROPS:{name:&quot;阿里巴巴集团控股有限公司&quot;,create_at:1999.000000,tagline:&quot;旨在构建未来的商业基础设施&quot;} ID:3 HEAD:9 TAIL:1 TYPE:WORK PROPS:{position:&quot;员工&quot;}	 ID:9 LABELS:Person PROPS:{name:&quot;赵某&quot;,born:1952.000000}	

</code></pre></div><p>可视化：
<img src="https://gitee.com/pangguoming/pangguoming/raw/master/images/neuro/zhangzhaolujing.png" alt="image"></p> <p>2、查询“张某”与“赵某”的最长人脉路径</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> path<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">start</span> :Person{name:<span class="token string">&quot;张某&quot;</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>rels <span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">end</span>  :Person{name:<span class="token string">&quot;赵某&quot;</span>}<span class="token punctuation">)</span> <span class="token keyword">RETURN</span> path 
</code></pre></div><p>结果数据过多暂不展示</p> <p>可视化：
<img src="https://gitee.com/pangguoming/pangguoming/raw/master/images/neuro/zhangzhaozuichanglujing.png" alt="image"></p> <p>3、按权重查找最短路径，把路径中关系上的某个属性（应为数值型属性）作为权重累加得到整条路径的权重，以此来查找权重最小的路径，比如 用关系边上的 weight属性
查找马某与张某weight权重的最短路径</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> path<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">start</span> :Person{name:<span class="token string">&quot;马某&quot;</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span> <span class="token operator">*</span><span class="token operator">&lt;</span>weight<span class="token punctuation">]</span><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">end</span>  :Person{name:<span class="token string">&quot;张某&quot;</span>}<span class="token punctuation">)</span> <span class="token keyword">RETURN</span> path 
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:97,result:1,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:4 LABELS:Person PROPS:{name:&quot;马某&quot;,born:1964.000000}	 ID:9 HEAD:7 TAIL:4 TYPE:FRIEND PROPS:{weight:4.000000}	 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}
</code></pre></div><p>可视化：
<img src="https://gitee.com/pangguoming/pangguoming/raw/master/images/neuro/mazhangminweight.png" alt="image"></p> <p>查找马某与张某weight权重的最长路径</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> path<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">start</span> :Person{name:<span class="token string">&quot;马某&quot;</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span> <span class="token operator">*</span><span class="token operator">&gt;</span>weight<span class="token punctuation">]</span><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">end</span>  :Person{name:<span class="token string">&quot;张某&quot;</span>}<span class="token punctuation">)</span> <span class="token keyword">RETURN</span> path
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:97,result:1,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:4 LABELS:Person PROPS:{name:&quot;马某&quot;,born:1964.000000}	 ID:12 HEAD:4 TAIL:5 TYPE:FRIEND PROPS:{weight:10.000000} ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000} ID:11 HEAD:6 TAIL:5 TYPE:FRIEND PROPS:{weight:5.000000} ID:6 LABELS:Person PROPS:{name:&quot;陈某&quot;,born:1960.000000} ID:10 HEAD:7 TAIL:6 TYPE:FRIEND PROPS:{weight:8.000000}	 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}

</code></pre></div><p>可视化：
<img src="https://gitee.com/pangguoming/pangguoming/raw/master/images/neuro/mazhangmaxweight.png" alt="image"></p> <h3 id="return指令"><a href="#return指令" class="header-anchor">#</a> RETURN指令</h3> <p>RETURN指令可以按照变量名返回模式匹配到的结果，并在每条结果记录中按变量在RETURN后面的出现次序排序，不在RETURN后面的变量列表中的变量将不返回。上面语句实例中我们已经大量使用了RETURN，在这里就不再赘述
实例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">match</span> <span class="token punctuation">(</span>n1<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r1<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r2<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>n3<span class="token punctuation">)</span> <span class="token keyword">return</span> n1<span class="token punctuation">,</span>r1<span class="token punctuation">,</span>n2<span class="token punctuation">,</span>r2<span class="token punctuation">,</span>n3
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:54,result:8,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:4 LABELS:Person PROPS:{name:&quot;马某&quot;,born:1964.000000}	 ID:12 HEAD:4 TAIL:5 TYPE:FRIEND PROPS:{weight:10}	 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}	 ID:4 HEAD:5 TAIL:2 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:2 LABELS:Company PROPS:{name:&quot;百度在线网络技术有限公司&quot;,create_at:2000.000000,tagline:&quot;是拥有强大互联网基础的领先AI公司&quot;}
(2)-----------------------------------------------------------------------
 ID:6 LABELS:Person PROPS:{name:&quot;陈某&quot;,born:1960.000000}	 ID:11 HEAD:6 TAIL:5 TYPE:FRIEND PROPS:{weight:5}	 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}	 ID:4 HEAD:5 TAIL:2 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:2 LABELS:Company PROPS:{name:&quot;百度在线网络技术有限公司&quot;,create_at:2000.000000,tagline:&quot;是拥有强大互联网基础的领先AI公司&quot;}
(3)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:10 HEAD:7 TAIL:6 TYPE:FRIEND PROPS:{weight:8}	 ID:6 LABELS:Person PROPS:{name:&quot;陈某&quot;,born:1960.000000}	 ID:11 HEAD:6 TAIL:5 TYPE:FRIEND PROPS:{weight:5}	 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}
(4)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:10 HEAD:7 TAIL:6 TYPE:FRIEND PROPS:{weight:8}	 ID:6 LABELS:Person PROPS:{name:&quot;陈某&quot;,born:1960.000000}	 ID:1 HEAD:6 TAIL:0 TYPE:WORK PROPS:{position:&quot;员工&quot;}	 ID:0 LABELS:Company PROPS:{name:&quot;小米科技有限责任公司&quot;,create_at:2010.000000,tagline:&quot;致力于让全球每个人都能享受科技带来的美好生活&quot;}
(5)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:9 HEAD:7 TAIL:4 TYPE:FRIEND PROPS:{weight:4}	 ID:4 LABELS:Person PROPS:{name:&quot;马某&quot;,born:1964.000000}	 ID:12 HEAD:4 TAIL:5 TYPE:FRIEND PROPS:{weight:10}	 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}
(6)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	 ID:9 HEAD:7 TAIL:4 TYPE:FRIEND PROPS:{weight:4}	 ID:4 LABELS:Person PROPS:{name:&quot;马某&quot;,born:1964.000000}	 ID:2 HEAD:4 TAIL:1 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:1 LABELS:Company PROPS:{name:&quot;阿里巴巴集团控股有限公司&quot;,create_at:1999.000000,tagline:&quot;旨在构建未来的商业基础设施&quot;}
(7)-----------------------------------------------------------------------
 ID:8 LABELS:Person PROPS:{name:&quot;王某&quot;,born:1965.000000}	 ID:7 HEAD:8 TAIL:3 TYPE:FRIEND PROPS:{weight:2}	 ID:3 LABELS:Person PROPS:{name:&quot;雷某&quot;,born:1969.000000}	 ID:0 HEAD:3 TAIL:0 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:0 LABELS:Company PROPS:{name:&quot;小米科技有限责任公司&quot;,create_at:2010.000000,tagline:&quot;致力于让全球每个人都能享受科技带来的美好生活&quot;}
(8)-----------------------------------------------------------------------
 ID:9 LABELS:Person PROPS:{name:&quot;赵某&quot;,born:1952.000000}	 ID:8 HEAD:9 TAIL:3 TYPE:FRIEND PROPS:{}	 ID:3 LABELS:Person PROPS:{name:&quot;雷某&quot;,born:1969.000000}	 ID:0 HEAD:3 TAIL:0 TYPE:WORK PROPS:{position:&quot;CEO&quot;}	 ID:0 LABELS:Company PROPS:{name:&quot;小米科技有限责任公司&quot;,create_at:2010.000000,tagline:&quot;致力于让全球每个人都能享受科技带来的美好生活&quot;}
</code></pre></div><h3 id="where指令"><a href="#where指令" class="header-anchor">#</a> WHERE指令</h3> <p>WHERE指令必须加载MATCH指令后面RETURN指令之前，用于条件过滤
1、单条件查询，如查询1965年后出生的人员</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n:Person<span class="token punctuation">)</span> <span class="token keyword">where</span> n<span class="token punctuation">.</span>born <span class="token operator">&gt;</span> <span class="token number">1965</span> <span class="token keyword">return</span> n
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:45,result:3,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:3 LABELS:Person PROPS:{name:&quot;雷某&quot;,born:1969.000000}
(2)-----------------------------------------------------------------------
 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}
(3)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}
</code></pre></div><p>2、多条件组合查询，查询1965年后出生并且名字以“李”开头的人员</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n:Person<span class="token punctuation">)</span> <span class="token keyword">where</span> n<span class="token punctuation">.</span>born <span class="token operator">&gt;</span> <span class="token number">1965</span> <span class="token operator">and</span> n<span class="token punctuation">.</span>name <span class="token operator">=</span><span class="token operator">~</span> <span class="token string">&quot;李*&quot;</span> <span class="token keyword">return</span> n
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:66,result:1,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}	
</code></pre></div><h3 id="order-by指令"><a href="#order-by指令" class="header-anchor">#</a> ORDER BY指令</h3> <p>对结果集按元素的某个属性进行排序，配合 asc 与desc 指定升序降序，order by后也可以添加多个排序项，这将实现按多个排序项依次排序</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n:Person<span class="token punctuation">)</span> <span class="token keyword">return</span> n <span class="token keyword">order</span> <span class="token keyword">by</span> n<span class="token punctuation">.</span>born <span class="token keyword">asc</span>
</code></pre></div><p>结果</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:45,result:7,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:9 LABELS:Person PROPS:{name:&quot;赵某&quot;,born:1952.000000}
(2)-----------------------------------------------------------------------
 ID:6 LABELS:Person PROPS:{name:&quot;陈某&quot;,born:1960.000000}
(3)-----------------------------------------------------------------------
 ID:4 LABELS:Person PROPS:{name:&quot;马某&quot;,born:1964.000000}
(4)-----------------------------------------------------------------------
 ID:8 LABELS:Person PROPS:{name:&quot;王某&quot;,born:1965.000000}
(5)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}
(6)-----------------------------------------------------------------------
 ID:5 LABELS:Person PROPS:{name:&quot;李某&quot;,born:1968.000000}
(7)-----------------------------------------------------------------------
 ID:3 LABELS:Person PROPS:{name:&quot;雷某&quot;,born:1969.000000}
</code></pre></div><h3 id="skip指令"><a href="#skip指令" class="header-anchor">#</a> SKIP指令</h3> <p>SKIp指令用于跳过结果集中指定个数的记录，只返回后续的</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n:Person<span class="token punctuation">)</span> <span class="token keyword">return</span> n skip <span class="token number">5</span>
</code></pre></div><p>结果</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:32,result:2,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:8 LABELS:Person PROPS:{name:&quot;王某&quot;,born:1965.000000}	
(2)-----------------------------------------------------------------------
 ID:9 LABELS:Person PROPS:{name:&quot;赵某&quot;,born:1952.000000}
</code></pre></div><h3 id="limit指令"><a href="#limit指令" class="header-anchor">#</a> LIMIT指令</h3> <p>LIMIT指令用于限制返回记录的个数，只返回原结果集中从开头开始指定个数的记录</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n:Person<span class="token punctuation">)</span> <span class="token keyword">return</span> n <span class="token keyword">limit</span> <span class="token number">1</span>
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:33,result:1,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:3 LABELS:Person PROPS:{name:&quot;雷某&quot;,born:1969.000000}	

</code></pre></div><p>利用SKIP指令和LIMIT指令可以实现分页功能，如每页3条记录返回第3页</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token keyword">return</span> n skip <span class="token number">6</span> <span class="token keyword">limit</span> <span class="token number">3</span>
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:33,result:3,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
 ID:6 LABELS:Person PROPS:{name:&quot;陈某&quot;,born:1960.000000}	
(2)-----------------------------------------------------------------------
 ID:7 LABELS:Person PROPS:{name:&quot;张某&quot;,born:1967.000000}	
(3)-----------------------------------------------------------------------
 ID:8 LABELS:Person PROPS:{name:&quot;王某&quot;,born:1965.000000}	
</code></pre></div><h3 id="create指令"><a href="#create指令" class="header-anchor">#</a> CREATE指令</h3> <p>CREATE指令用于根据模式表达式创建图数据，图数据也就是节点与关系的集合。模式表达式可以是单个的节点或者节点与关系的组合，但不能是单独的关系，因为不能创建没有首尾节点的“悬空”关系，上面入门实例中我们已经使用过CREATE指令
1、创建一个独立节点</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token punctuation">(</span>Leimou:Person {name:<span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1969</span>}<span class="token punctuation">)</span>
</code></pre></div><p>2、创建一个关系，并带有首尾节点</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token punctuation">(</span>:Person {name:<span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1969</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>:FREND<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>:Person {name:<span class="token string">&quot;李四&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1969</span>}<span class="token punctuation">)</span>
</code></pre></div><p>3、根据一个略复杂的模式表达式创建节点关系的集合</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token punctuation">(</span>:Person {name:<span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1969</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>:FREND<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>:Person {name:<span class="token string">&quot;李四&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1969</span>}<span class="token operator">-</span><span class="token punctuation">[</span>:<span class="token keyword">WORK</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>:Company {name:<span class="token string">&quot;小米科技有限责任公司&quot;</span><span class="token punctuation">,</span> create_at:<span class="token number">2010</span>}<span class="token punctuation">)</span>
</code></pre></div><h3 id="merge指令"><a href="#merge指令" class="header-anchor">#</a> MERGE指令</h3> <p>MERGE指令用于先根据模式表达式到数据库中像MATCH治理那样查找是否有匹配的数据，如果没有则像CREATE指令那样创建模式表达的数据，如果有则不做任何处理
1、如以下指令数据库不做任何处理，因为数据库已经存在模式描述的节点</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MERGE</span> <span class="token punctuation">(</span>Leimou:Person {name:<span class="token string">&quot;雷某&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1969</span>}<span class="token punctuation">)</span>
</code></pre></div><p>2、以下指令数据库依然不做任何处理，因为数据库中存能匹配上的数据</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MERGE</span> <span class="token punctuation">(</span>Zhaomou:Person {name:<span class="token string">&quot;赵某&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1952</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r:FRIEND<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>Leimou:Person {name:<span class="token string">&quot;雷某&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1969</span>}<span class="token punctuation">)</span>
</code></pre></div><p>3、以下指令会根据模式新建模式中描述的所有节点和关系，因为没有在数据库中匹配到符合模式的数据</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MERGE</span> <span class="token punctuation">(</span>Zhaomou:Person {name:<span class="token string">&quot;赵某&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1952</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r:LOVE<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>Leimou:Person {name:<span class="token string">&quot;雷某&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1969</span>}<span class="token punctuation">)</span>
</code></pre></div><p>上面指令执行完毕后，数据库中会有两个“赵某”节点和两个“雷某”节点，但其中一对赵某雷某之间是用“LOVE”关系连接的</p> <h3 id="delete指令"><a href="#delete指令" class="header-anchor">#</a> DELETE指令</h3> <p>DELETE指令必须在MATCH指令后，用于删除MATCH到的某个数据项，数据项可以是节点也可以说是关系。注意如果要删除一个节点，但此节点还带有关联的关系，则DELETE指令会无法删除，因为不能让关系“悬空”，需要先删掉关联的关系，然后才能删除此节点
1、下面指令将提示无法删除，因为节点雷某还关联着“WORK”和“FRIEND”关系</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>Leimou:Person {name:<span class="token string">&quot;王某&quot;</span>}<span class="token punctuation">)</span> <span class="token keyword">DELETE</span> Leimou
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:CLIST_HAS_LINK_ERR,cursor:62,result:0,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0
</code></pre></div><p>2、删除王某和雷某之间的FRIEND关系</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>:Person {name:<span class="token string">&quot;王某&quot;</span>}<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>r:FRIEND<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>:Person {name:<span class="token string">&quot;王某&quot;</span>}<span class="token punctuation">)</span> <span class="token keyword">DELETE</span> r
</code></pre></div><h3 id="detach-delete指令"><a href="#detach-delete指令" class="header-anchor">#</a> DETACH DELETE指令</h3> <p>DETACH DELETE指令与DELETE指令相似必须在MATCH指令后，用于删除MATCH到的某个数据项，但DETACH DELETE指令会先删除所有关联关系然后删除节点，DETACH DELETE指令可以一次完成这两步操作，因此DETACH DELETE指令不会出现无法删除的情况。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>Leimou:Person {name:<span class="token string">&quot;雷某&quot;</span><span class="token punctuation">,</span> born:<span class="token number">1969</span>}<span class="token punctuation">)</span> DETACH <span class="token keyword">DELETE</span> Leimou
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:69,result:0,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:1,delete links:0
</code></pre></div><h3 id="set指令"><a href="#set指令" class="header-anchor">#</a> SET指令</h3> <p>SET指令必须在MATCH指令后，用于为节点或关系设置属性，如果已经有同名属性了，则SET会覆盖原来的属性值，否则就新建此属性
1、为人员“张某”添加性别属性</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n :Person{name:<span class="token string">&quot;张某&quot;</span>}<span class="token punctuation">)</span> <span class="token keyword">set</span> n<span class="token punctuation">.</span>sex<span class="token operator">=</span><span class="token string">&quot;男&quot;</span> <span class="token keyword">return</span> n
</code></pre></div><p>2、为人员“张某”修改性别属性为女</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n :Person{name:<span class="token string">&quot;张某&quot;</span>}<span class="token punctuation">)</span> <span class="token keyword">set</span> n<span class="token punctuation">.</span>sex<span class="token operator">=</span><span class="token string">&quot;女&quot;</span> <span class="token keyword">return</span> n
</code></pre></div><p>3、为人员“张某”修改Person标签为Person2</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n :Person{name:<span class="token string">&quot;张某&quot;</span>}<span class="token punctuation">)</span> <span class="token keyword">set</span> n:Person2 <span class="token keyword">return</span> n
</code></pre></div><h3 id="remove指令"><a href="#remove指令" class="header-anchor">#</a> REMOVE指令</h3> <p>REMOVE指令必须在MATCH指令后，用于移除节点或关系上的属性
1、移除除人员“张某”的“sex”属性</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">MATCH</span> <span class="token punctuation">(</span>n :Person{name:<span class="token string">&quot;张某&quot;</span>}<span class="token punctuation">)</span> REMOVE n<span class="token punctuation">.</span>sex <span class="token keyword">return</span> n
</code></pre></div><h3 id="call指令"><a href="#call指令" class="header-anchor">#</a> CALL指令</h3> <p>CALL指令用于调用系统内的存储过程，每个存储过程都有自己的功能
1、db.labels()返回数据库内所有的节点标签</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">call</span> db<span class="token punctuation">.</span>labels<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>tatus:OK,cursor:16,result:2,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
&quot;Person&quot;	
(2)-----------------------------------------------------------------------
&quot;Company&quot;
</code></pre></div><p>2、db.types()返回数据库内所有的关系类型</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">call</span> db<span class="token punctuation">.</span><span class="token keyword">types</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:15,result:2,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
&quot;FRIEND&quot;	
(2)-----------------------------------------------------------------------
&quot;WORK&quot;	
</code></pre></div><p>3、result.count()返回结果集个数</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">match</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token keyword">call</span> result<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>status:OK,cursor:29,result:1,add nodes:0,add links:0,modify nodes:0,modify links:0,delete nodes:0,delete links:0

(1)-----------------------------------------------------------------------
10.000000	
</code></pre></div><h3 id="load-csv指令"><a href="#load-csv指令" class="header-anchor">#</a> LOAD CSV指令</h3> <p>LOAD CSV指令用于批量从csv文件导入图数据，数据源是.csv文件
1、配合CREATE指令，从&quot;test.csv&quot;读取所有行，并把内行第一列作为“name”属性批量导入并创建“Person”节点</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">load</span> csv <span class="token keyword">from</span> <span class="token string">&quot;test.csv&quot;</span> <span class="token keyword">as</span> line <span class="token keyword">create</span> <span class="token punctuation">(</span>:Person{name:line<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>}<span class="token punctuation">)</span>
</code></pre></div><p>2、上面例子也可以换成MERGE指令</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">load</span> csv <span class="token keyword">from</span> \&quot;test<span class="token punctuation">.</span>csv\&quot; <span class="token keyword">as</span> line <span class="token keyword">merge</span> <span class="token punctuation">(</span>:Person{name:line<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>}<span class="token punctuation">)</span>&quot;<span class="token punctuation">)</span>
</code></pre></div><p>3、也可以同时导入创建节点标签、关系类型和属性</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">load</span> csv <span class="token keyword">from</span> <span class="token string">&quot;test.csv&quot;</span> <span class="token keyword">as</span> line <span class="token keyword">create</span> <span class="token punctuation">(</span>:line<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>{line<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>:line<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>}<span class="token punctuation">)</span>&quot;
</code></pre></div><p>4、对于带有“表头（标题）”的csv文，可以用 load csv with headers 指令，并且文件名后要加上as line作为每行的变量名，这里“line”就是变量名，可以自己任意定义其他名字</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">load</span> csv <span class="token keyword">with</span> headers <span class="token keyword">from</span> \&quot;test<span class="token punctuation">.</span>csv\&quot; <span class="token keyword">as</span> line <span class="token keyword">create</span> <span class="token punctuation">(</span>:line<span class="token punctuation">.</span>label{name:line<span class="token punctuation">.</span>name<span class="token punctuation">,</span>age:line<span class="token punctuation">.</span>age}<span class="token punctuation">)</span>
</code></pre></div><p>5、也可以配合MATCH指令，从数据库中整合已有数据来创建新的图数据</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">load</span> csv <span class="token keyword">from</span> <span class="token string">&quot;test.csv&quot;</span> <span class="token keyword">as</span> line <span class="token keyword">match</span> <span class="token punctuation">(</span>n:Person{name:line<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>}<span class="token punctuation">)</span> <span class="token keyword">create</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span>:line<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>{size:line<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>}<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>:Job{name:line<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span>}<span class="token punctuation">)</span>
</code></pre></div><h2 id="运维管理"><a href="#运维管理" class="header-anchor">#</a> 运维管理</h2> <h3 id="savedb指令"><a href="#savedb指令" class="header-anchor">#</a> SAVEDB指令</h3> <p>因为NeuroDB是内存级图数据库，所以所有的数据都是在内存中操作的，如果想把数据持久化保存在磁盘上形成文件，并且下次启动NeuroDB还能回复，那就需要在更改数据后或者关闭NeuroDB前运行SAVEDB指令</p> <div class="language-sql extra-class"><pre class="language-sql"><code>savedb
</code></pre></div><h3 id="create-database指令"><a href="#create-database指令" class="header-anchor">#</a> CREATE DATABASE指令</h3> <p>NeuroDB 支持创建多个图数据库，默认启动NeuroDB会有一个名叫“default”的数据库提供给用户，如果想要新建一个数据库则用CREATE DATABASE指令，后面加上数据库命名即可</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> mydatabase
</code></pre></div><h3 id="show-databases指令"><a href="#show-databases指令" class="header-anchor">#</a> SHOW DATABASES指令</h3> <p>想要查看系统中有哪些数据库，则使用SHOW DATABASES指令</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token keyword">DATABASES</span>
</code></pre></div><p>结果：</p> <div class="language- extra-class"><pre class="language-text"><code>INFO:  
default
mydatabase
</code></pre></div><h3 id="use-指令"><a href="#use-指令" class="header-anchor">#</a> USE 指令</h3> <p>USE 指令加上数据库名，可以切换到指定数据库，后面所有操作将在此数据库上进行</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">USE</span> mydatabase
</code></pre></div><h3 id="drop-database指令"><a href="#drop-database指令" class="header-anchor">#</a> DROP DATABASE指令</h3> <p>DROP DATABASE指令加上数据库名，可以删除指定数据库，为了数据安全请谨慎操作</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> mydatabase
</code></pre></div><h3 id="服务配置文件"><a href="#服务配置文件" class="header-anchor">#</a> 服务配置文件</h3> <p>在NeuroDB根目录的bin目录下有“neuro.conf”文件，其中包含了系统的一些配置信息，并且每行配置信息都有注释，用户可以根据需求自行配置</p> <div class="language- extra-class"><pre class="language-text"><code>## 服务启动的端口号
port 8839
## 客户端超时注销时间，单位秒
max-idletime 300
## ToDo 结果集最大限制，超过则终止查询并提示
max-results 10000
## ToDo 持久化策略 0 执行存盘命令时（默认），1 数据变动时，2 关闭数据库时 3 空闲时（无客户端连接时） 4 大于4时，定时间隔时间，单位秒
save-strategy 0
## ToDo 日志记录级别
log-level 0
</code></pre></div><h3 id="客户端启动参数"><a href="#客户端启动参数" class="header-anchor">#</a> 客户端启动参数</h3> <p>NEURO_CLI客户端默认链接ip为127.0.0.1（本机）的8839端口，也就是NEURO_SERVER服务的默认启动端口，如果用户想要修改可以使用 ip 与 port 参数。
如要连接ip为192.168.0.1服务器上的启动端口为8888的也就是NEURO_SERVER服务
Windows 系统</p> <div class="language- extra-class"><pre class="language-text"><code>NEURO_CLI.exe ip 192.168.0.1 port 8888
</code></pre></div><p>Linux 系统</p> <div class="language- extra-class"><pre class="language-text"><code>./NEURO_CLI ip 192.168.0.1 port 8888
</code></pre></div><h3 id="运行日志"><a href="#运行日志" class="header-anchor">#</a> 运行日志</h3> <p>在NeuroDB根目录的logs目录下有“neuro.log”文件，其中记录了所有运行事件、命令执行记录，我们可以根据日志查看运行记录和恢复数据，应为日志中已经按顺序记录了所有执行过的命令，所以我们依次执行完相应命令就可以恢复数据
neuro.log内容如下</p> <div class="language- extra-class"><pre class="language-text"><code>1671713304:- Server start at localhost:8839
1671713304:- DB loaded from disk
1671713305:. 0 clients connected , 2041914 bytes in use
1671713310:. 0 clients connected , 2041914 bytes in use
1671713311:. Accepted 127.0.0.1:39886
1671713315:. 1 clients connected , 2042131 bytes in use
1671713320:## match (n) return n limit 5
1671713320:. 1 clients connected , 2042398 bytes in use
1671713325:. 1 clients connected , 2042398 bytes in use
1671713330:. 1 clients connected , 2042398 bytes in use
</code></pre></div><p>上面时间戳数字后以#开头的就是执行过的命令记录，其他为事件记录</p> <h2 id="各开发语言驱动"><a href="#各开发语言驱动" class="header-anchor">#</a> 各开发语言驱动</h2> <h3 id="javascript驱动"><a href="#javascript驱动" class="header-anchor">#</a> JavaScript驱动</h3> <h3 id="java驱动"><a href="#java驱动" class="header-anchor">#</a> java驱动</h3> <h3 id="python驱动"><a href="#python驱动" class="header-anchor">#</a> python驱动</h3> <h3 id="c-驱动"><a href="#c-驱动" class="header-anchor">#</a> C#驱动</h3> <h3 id="c-c-驱动"><a href="#c-c-驱动" class="header-anchor">#</a> c/c++驱动</h3> <h2 id="各语言嵌入式开发"><a href="#各语言嵌入式开发" class="header-anchor">#</a> 各语言嵌入式开发</h2> <h3 id="javascript"><a href="#javascript" class="header-anchor">#</a> JavaScript</h3> <h3 id="java"><a href="#java" class="header-anchor">#</a> java</h3> <h3 id="python"><a href="#python" class="header-anchor">#</a> python</h3> <h3 id="c"><a href="#c" class="header-anchor">#</a> C#</h3> <h3 id="c-c"><a href="#c-c" class="header-anchor">#</a> c/c++</h3></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.cb2501b5.js" defer></script><script src="/assets/js/2.44af4691.js" defer></script><script src="/assets/js/8.29e77ade.js" defer></script>
  </body>
</html>
